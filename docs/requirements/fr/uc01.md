# UC-01 Регистрация в программе лояльности

### Предусловия

1. Пользователь не авторизован в системе.

### Постусловия

1. В системе создана новая учетная запись.
2. Пользователь авторизован в системе.

### Основной сценарий

1. Пользователь нажимает на кнопку присоединения к программе лояльности.
2. Система отображает экран с формой регистрации.
3. Пользователь вводит номер телефона и нажимает кнопку «Получить код».
4. Система отправляет sms с кодом подтверждения на указанный номер телефона.
5. Система отображает поле для ввода кода с таймером обратного отсчета для повторного запроса кода.
6. Пользователь получает sms с кодом подтверждения.
7. Пользователь вводит в поле код, полученный в sms.
8. Система проверяет правильность кода. Код правильный.
9. Система проверяет наличие пользователя с таким номером телефона в базе данных. Такой пользователь НЕ найден.
10. Система создает новую учетную запись пользователя.
11. Система авторизует пользователя.
12. Система отображает форму для ввода данных пользователя: имя, фамилия, дата рождения, адрес электронной почты 
    (все необязательны).
13. Пользователь вводит данные и нажимает на кнопку «Сохранить».
14. Система сохраняет полученные данные.
15. Система отображает личный кабинет пользователя — тот экран, с которого он переход к регистрации.

### Альтернативные сценарии

6а. Пользователь НЕ получает sms с кодом подтверждения.

1. По истечении таймера пользователь повторно запрашивает код подтверждения.
2. Выполняется **основной сценарий**, начиная с шага 4.

8а. Система проверяет правильность кода. Код НЕправильный.

1. Система выводит сообщение об ошибке кода.
2. Выполняется **основной сценарий**, начиная с шага 7. Также возможен переход на **альтернативный сценарий 6а**.

9a. Система проверяет наличие пользователя с таким номером телефона в базе данных. Такой пользователь найден.

1. Выполняется **сценарий [UC-02 Авторизация в программе лояльности](uc02.md)**, начиная с шага 3.