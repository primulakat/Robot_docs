# UC-01 Регистрация в программе лояльности

### Предусловия

1. Пользователь не авторизован в системе.

### Постусловия

1. В системе создана новая учетная запись.
2. Пользователь авторизован в системе.

### Основной сценарий

1. Пользователь нажимает на кнопку «Зарегистрироваться».
2. Система отображает экран с формой регистрации.
3. Пользователь вводит номер телефона.
4. Система проверяет наличие пользователя с таким номером телефона в базе данных. Такой пользователь НЕ найден.
5. Система отправляет sms с кодом подтверждения на указанный номер телефона.
6. Система отображает поле для ввода кода и таймером обратного отсчета для повторного запроса кода.
7. Пользователь получает sms с кодом подтверждения.
8. Пользователь вводит в поле код, полученный в sms.
9. Система проверяет правильность кода. Код правильный.
10. Система авторизует пользователя.
11. Система отображает форму для ввода данных пользователя: имя, фамилия, дата рождения, адрес электронной почты (все необязательны).
12. Пользователь вводит данные.
13. Система сохраняет полученные данные.
14. Система отображает личный кабинет пользователя.

### Альтернативные сценарии

4a. Система проверяет наличие пользователя с таким номером телефона в базе данных. Такой пользователь найден.

1. Система выводит сообщение, что пользователь с таким номером уже существует и предлагает указать другой номер.
2. Выполняется **основной сценарий**, начиная с шага 3.

7а. Пользователь НЕ получает sms с кодом подтверждения.

1. По истечении таймера пользователь повторно запрашивает код подтверждения.
2. Выполняется **основной сценарий**, начиная с шага 5.

9а. Система проверяет правильность кода. Код НЕправильный.

1. Система выводит сообщение об ошибке кода.
2. Выполняется **основной сценарий**, начиная с шага 8. Также возможен переход на **альтернативный сценарий 7а**.
