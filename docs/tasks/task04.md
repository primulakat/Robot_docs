# T-04 Получение заказа

### Материалы к задаче

Use case: [UC-12 Просмотр карточки заказа](../requirements/uc12.md), [UC-09 Получение заказа](../requirements/uc09.md)

Интерфейсы: [WF-08 Карточка заказа](../user_interface/wf08.md), [WF-12 Табло в зале](../user_interface/wf12.md)

API методы: Получение данных о заказе, Получение статуса заказа

*Указано приложение для генерации штрихкодов*
### Тест-кейсы

#### **`TC-04.01`** Заказ был оплачен картой

Предусловия

1. Кассовый день открыт.
2. Заказ оформлен и находится в статусе «Создан».
3. Заказ оплачен картой.
4. Открыта карточка заказа. В ней отображаются сообщение «Заказ успешно оформлен и передан на кухню» и номер заказа для получения.
5. Номер заказа отображается на табло в зале в колонке «Готовятся».

Постусловия

1. Заказ получен.
2. Номер заказа не отображается на табло в зале.

| Шаг | Действие                                           | Ожидаемый результат                                                                                                                                                                              |
| --- | -------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1   | Перевести заказ в статус «Готовится»               | В карточке заказа отображается текст «Заказ готовится».<br>Номер заказа отображается на табло в зале в колонке «Готовятся».                                                                      |
| 2   | Перевести заказ в статус «Готов»                   | В карточке заказа отображается текст «Заказ готовится».<br>Номер заказа отображается на табло в зале в колонке «Готовятся».                                                                      |
| 3   | Перевести заказ в статус «На выдаче»               | В карточке заказа отображается текст «Заказ готов!» и штрих-код для получения заказа.<br>Номер заказа отображается на табло в зале в колонке «Готовы».                                           |
| 4   | Обратиться к менеджеру в зале для получения заказа | Менеджер выдает заказ и отмечает его как выданный.<br>Заказ получает статус «Получен».<br>Номер заказа перестает отображаться на табло.<br>В карточке заказа отображается текст «Заказ получен». |

#### **`TC-04.02`** Заказ должен быть оплачен наличными

Предусловия

1. Кассовый день открыт.
2. Заказ оформлен и находится в статусе «Создан».
3. Заказ должен быть оплачен наличными.
4. Открыта карточка заказа. В ней отображаются сообщение «Заказ успешно оформлен и передан на кухню» и номер заказа для получения.
5. Номер заказа отображается на табло в зале в колонке «Готовятся».

Постусловия

1. Заказ получен.
2. Заказ оплачен наличными.
3. Номер заказа не отображается на табло в зале.

| Шаг | Действие                                           | Ожидаемый результат                                                                                                                                                                              |
| --- | -------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1   | Перевести заказ в статус «Готовится»               | В карточке заказа отображается текст «Заказ готовится».<br>Номер заказа отображается на табло в зале в колонке «Готовятся».                                                                      |
| 2   | Перевести заказ в статус «Готов»                   | В карточке заказа отображается текст «Заказ готовится».<br>Номер заказа отображается на табло в зале в колонке «Готовятся».                                                                      |
| 3   | Перевести заказ в статус «На выдаче»               | В карточке заказа отображается текст «Заказ готов!» и штрих-код для получения заказа.<br>Номер заказа отображается на табло в зале в колонке «Готовы».                                           |
| 4   | Обратиться к менеджеру в зале для получения заказа | Менеджер просит оплатить заказ наличными.                                                                                                                                                        |
| 5   | Оплатить заказ наличными                           | Менеджер выдает заказ и отмечает его как выданный.<br>Заказ получает статус «Получен».<br>Номер заказа перестает отображаться на табло.<br>В карточке заказа отображается текст «Заказ получен». |

#### **`TC-04.02`** Заказ не получен

Предусловия

1. Кассовый день открыт.
2. Заказ оформлен и находится в статусе «Создан».
3. Заказ оплачен картой или не был оплачен.
4. Открыта карточка заказа. В ней отображаются сообщение «Заказ успешно оформлен и передан на кухню» и номер заказа для получения.
5. Номер заказа отображается на табло в зале в колонке «Готовятся».

Постусловия

1. Заказ не получен.
2. Номер заказа не отображается на табло в зале.

| Шаг | Действие                                               | Ожидаемый результат                                                                                                                                            |
| --- | ------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | Перевести заказ в статус «Готовится»                   | В карточке заказа отображается текст «Заказ готовится».<br>Номер заказа отображается на табло в зале в колонке «Готовятся».                                    |
| 2   | Перевести заказ в статус «Готов»                       | В карточке заказа отображается текст «Заказ готовится».<br>Номер заказа отображается на табло в зале в колонке «Готовятся».                                    |
| 3   | Перевести заказ в статус «На выдаче»                   | В карточке заказа отображается текст «Заказ готов!» и штрих-код для получения заказа.<br>Номер заказа отображается на табло в зале в колонке «Готовы».         |
| 4   | Не обращаться за получением заказа в течение 3-х часов | Заказ получает статус «Самоотказ».<br>Номер заказа перестает отображаться на табло.<br>В карточке заказа отображается текст «Самоотказ. Заказ не был получен». |
